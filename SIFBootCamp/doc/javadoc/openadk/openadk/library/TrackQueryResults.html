<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.6.0_07) on Sat Nov 19 10:16:50 GMT+08:00 2011 -->
<TITLE>
TrackQueryResults
</TITLE>

<META NAME="date" CONTENT="2011-11-19">

<LINK REL ="stylesheet" TYPE="text/css" HREF="../../stylesheet.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="TrackQueryResults";
    }
}
</SCRIPT>
<NOSCRIPT>
</NOSCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">
<HR>


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/TrackQueryResults.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../index-files/index-1.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../openadk/library/TopicFactory.html" title="interface in openadk.library"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../openadk/library/TrackQueryResultsData.html" title="class in openadk.library"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../index.html?openadk/library/TrackQueryResults.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="TrackQueryResults.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;<A HREF="#nested_classes_inherited_from_class_openadk.library.impl.TrackQueryResultsImpl">NESTED</A>&nbsp;|&nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
openadk.library</FONT>
<BR>
Class TrackQueryResults</H2>
<PRE>
java.lang.Object
  <IMG SRC="../../resources/inherit.gif" ALT="extended by "><A HREF="../../openadk/library/impl/TrackQueryResultsImpl.html" title="class in openadk.library.impl">openadk.library.impl.TrackQueryResultsImpl</A>
      <IMG SRC="../../resources/inherit.gif" ALT="extended by "><B>openadk.library.TrackQueryResults</B>
</PRE>
<DL>
<DT><B>All Implemented Interfaces:</B> <DD><A HREF="../../openadk/library/QueryResults.html" title="interface in openadk.library">QueryResults</A></DD>
</DL>
<HR>
<DL>
<DT><PRE>public class <B>TrackQueryResults</B><DT>extends <A HREF="../../openadk/library/impl/TrackQueryResultsImpl.html" title="class in openadk.library.impl">TrackQueryResultsImpl</A></DL>
</PRE>

<P>
Synchronously issues one or more SIF Requests to a zone or topic and returns
  the results to the calling thread as they are received.<p>

  TrackQueryResults differs from normal (asynchonous) SIF Request and Response
  message handling in that responses are not dispatched to the usual QueryResults
  objects in the message dispatching chain. Rather, they are delvered directly
  to this class and returned to the calling thread by the <code>next</code>
  method. The calling thread is blocked when <code>waitForResults</code> is
  called for <i>synchronous</i> SIF Request processing.<p>

  <b>When to Use</b>
  <p>
  TrackQueryResults should be used when:<p>

  <ul>
      <li>
          Your agent needs to request one or more objects from a zone before
          proceeding with the current operation. In this case, a synchronous
          method of SIF Request and Response processing is ideal because the
          current thread can block until the query has completed, avoiding
          complex asynchronous interactions in your code. If results are not
          received in the specified period of time, the agent can timeout and
          abandon the operation in progress.<br/><br/>
      </li>
      <li>
          Your agent needs to query a zone for objects while handling a SIF
          Event message. In this case, Selective Message Blocking is
          automatically invoked by the TrackQueryResults constructor. (Refer
          to the SIF Specification for more information on Selective Message
          Blocking.) Note: When the Agent Local Queue (ALQ) is enabled,
          Selective Message Blocking is not necessary. The ADK will dispatch
          messages from the local queue regardless. However, to ensure your
          code works properly even when the local queue is disabled, we suggest
          always using the TrackQueryResults class when sending SIF Requests
          during SIF Event handling.<br/><br/>
      </li>
  </ul>
  <p>

  <b>How to Use</b>
  <p>

  Follow these steps to use TrackQueryResults:<p>

  <ul>
      <li>
          Create an instance of the TrackQueryResults class. If your code
          is processing a SIF Event message from the Subscriber.onEvent
          method, pass the <code>Event</code> object to the constructor. This
          will invoke Selective Message Blocking on the event to prevent a
          deadlock condition at the Zone Integration Server.<br/><br/>

          <code>
          TrackQueryResult tqr = new TrackQueryResults();<br/>
          </code>
          <br/>
      </li>
      <li>
          Call the <code>addQuery</code> method one or more times to specify
          the queries the TrackQueryResults object will issue. If you add more
          than one query, keep in mind the results may not be received in the
          same order as the queries were issued.<br/><br/>

          <code>
          //  Query for a SchoolInfo object by RefId<br/>
          SIFDTD dtd = ADK.DTD();<br/>
          Query query = new Query( dtd.SCHOOLINFO );<br/>
          query.addCondition( dtd.SCHOOLINFO_REFID, Condition.EQ, refId );<br/>
          Topic schoolInfo = getTopicFactory().getInstance( dtd.SCHOOLINFO );<br/>
          <br/>
          //  Add the query to TrackQueryResults<br/>
          tqr.addQuery( schoolInfoTopic, query );<br/>
          </code>
          <br/>
      </li>
      <li>
          Create a loop that calls the <code>waitForResults</code>,
          <code>available</code>, and <code>next</code> methods as illustrated
          below to wait for and retrieve the results of all queries. The
          outermost <code>waitForResults</code> loop blocks until at least
          <i>one</i> result is available, all queries have completed (i.e. the
          last packet of each SIF_Response message has been received), or the
          timeout period has expired. The inner <code>available</code> method
          does not block.<br/><br/>

          <code>
          //  Timeout if results are not received in 30 seconds...<br/>
          while( tqr.waitForResults( 30000 ) )<br/>
          {<br/>
          &nbsp;&nbsp;&nbsp;&nbsp;//  Retrieve all messages so far<br/>
          &nbsp;&nbsp;&nbsp;&nbsp;while( tqr.available() )<br/>
          &nbsp;&nbsp;&nbsp;&nbsp;{<br/>
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SIFDataObject[] data = tqr.next();<br/>
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for( int i = 0; i < data.length; i++ )<br/>
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//  Process the SIF Data Objects received...<br/>
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
          &nbsp;&nbsp;&nbsp;&nbsp;}<br/>
          }<br/>
          </code>
          <br/><br/>
      </li>
  </ul>

  <b>TrackQueryResultsData</b>
  <p>
  When TrackQueryResults receives a SIF Response message, it captures not only
  the SIF Data Objects provided by that message, but also the zone from which
  the message was received and the associated SIFMessageInfo object, which
  includes header fields and optionally the XML content of the message.
  TrackQueryResults packages this data to the caller by returning an instance
  of the TrackQueryResultsData class.<p>
<P>

<P>
<DL>
<DT><B>Version:</B></DT>
  <DD>ADK 1.0</DD>
<DT><B>Author:</B></DT>
  <DD>Eric Petersen</DD>
</DL>
<HR>

<P>
<!-- ======== NESTED CLASS SUMMARY ======== -->

<A NAME="nested_class_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Nested Class Summary</B></FONT></TH>
</TR>
</TABLE>
&nbsp;<A NAME="nested_classes_inherited_from_class_openadk.library.impl.TrackQueryResultsImpl"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Nested classes/interfaces inherited from class openadk.library.impl.<A HREF="../../openadk/library/impl/TrackQueryResultsImpl.html" title="class in openadk.library.impl">TrackQueryResultsImpl</A></B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><A HREF="../../openadk/library/impl/TrackQueryResultsImpl.QueryWrapper.html" title="class in openadk.library.impl">TrackQueryResultsImpl.QueryWrapper</A></CODE></TD>
</TR>
</TABLE>
&nbsp;

<!-- ======== CONSTRUCTOR SUMMARY ======== -->

<A NAME="constructor_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Constructor Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><B><A HREF="../../openadk/library/TrackQueryResults.html#TrackQueryResults()">TrackQueryResults</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Constructs a TrackQueryResults object to be used when the agent is not
  processing a SIF_Event message.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><B><A HREF="../../openadk/library/TrackQueryResults.html#TrackQueryResults(openadk.library.Event, openadk.library.MessageInfo)">TrackQueryResults</A></B>(<A HREF="../../openadk/library/Event.html" title="class in openadk.library">Event</A>&nbsp;event,
                  <A HREF="../../openadk/library/MessageInfo.html" title="interface in openadk.library">MessageInfo</A>&nbsp;msgInfo)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Constructs a TrackQueryResults object to be used when the agent needs
  to query for additional data while processing a SIF_Event message.</TD>
</TR>
</TABLE>
&nbsp;
<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Method Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../openadk/library/TrackQueryResults.html#addQuery(openadk.library.Topic, openadk.library.Query)">addQuery</A></B>(<A HREF="../../openadk/library/Topic.html" title="interface in openadk.library">Topic</A>&nbsp;topic,
         <A HREF="../../openadk/library/Query.html" title="class in openadk.library">Query</A>&nbsp;query)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Add a query to be executed when the waitForResults method is called.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../openadk/library/TrackQueryResults.html#addQuery(openadk.library.Topic, openadk.library.Query, java.lang.String)">addQuery</A></B>(<A HREF="../../openadk/library/Topic.html" title="interface in openadk.library">Topic</A>&nbsp;topic,
         <A HREF="../../openadk/library/Query.html" title="class in openadk.library">Query</A>&nbsp;query,
         java.lang.String&nbsp;destinationId)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Add a query to be executed when the waitForResults method is called.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../openadk/library/TrackQueryResults.html#addQuery(openadk.library.Zone, openadk.library.Query)">addQuery</A></B>(<A HREF="../../openadk/library/Zone.html" title="interface in openadk.library">Zone</A>&nbsp;zone,
         <A HREF="../../openadk/library/Query.html" title="class in openadk.library">Query</A>&nbsp;query)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Add a query to be executed when the waitForResults method is called</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../openadk/library/TrackQueryResults.html#addQuery(openadk.library.Zone, openadk.library.Query, java.lang.String)">addQuery</A></B>(<A HREF="../../openadk/library/Zone.html" title="interface in openadk.library">Zone</A>&nbsp;zone,
         <A HREF="../../openadk/library/Query.html" title="class in openadk.library">Query</A>&nbsp;query,
         java.lang.String&nbsp;destinationId)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Add a query to be executed when the waitForResults method is called</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../openadk/library/TrackQueryResults.html#available()">available</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns the number of results currently available</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../openadk/library/ADKException.html" title="class in openadk.library">ADKException</A>[]</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../openadk/library/TrackQueryResults.html#getErrors()">getErrors</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Gets any SIF_Request errors received when the queries were executed.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../openadk/library/TrackQueryResults.html#hasErrors()">hasErrors</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Determines if any SIF_Request errors occurred when the queries were executed.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../openadk/library/TrackQueryResults.html#hasNext()">hasNext</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Determines if any results will be returned by the <code>next</code> method</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../openadk/library/TrackQueryResults.html#isComplete()">isComplete</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Have all requests been received?</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../openadk/library/TrackQueryResultsData.html" title="class in openadk.library">TrackQueryResultsData</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../openadk/library/TrackQueryResults.html#next()">next</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns the next group of result data, or null if no data is available.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../openadk/library/TrackQueryResults.html#setQueryOptions(int)">setQueryOptions</A></B>(int&nbsp;queryOptions)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sets optional query options</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../openadk/library/TrackQueryResults.html#waitForResults(int)">waitForResults</A></B>(int&nbsp;timeout)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sends a SIF_Request message for each Query passed to the <code>addQuery</code>
  method and resets the timeout period to the given value.</TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_openadk.library.impl.TrackQueryResultsImpl"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Methods inherited from class openadk.library.impl.<A HREF="../../openadk/library/impl/TrackQueryResultsImpl.html" title="class in openadk.library.impl">TrackQueryResultsImpl</A></B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><A HREF="../../openadk/library/impl/TrackQueryResultsImpl.html#onQueryPending(openadk.library.MessageInfo, openadk.library.Zone)">onQueryPending</A>, <A HREF="../../openadk/library/impl/TrackQueryResultsImpl.html#onQueryResults(openadk.library.DataObjectInputStream, openadk.library.infra.SIF_Error, openadk.library.Zone, openadk.library.MessageInfo)">onQueryResults</A></CODE></TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_java.lang.Object"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Methods inherited from class java.lang.Object</B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE>equals, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</CODE></TD>
</TR>
</TABLE>
&nbsp;
<P>

<!-- ========= CONSTRUCTOR DETAIL ======== -->

<A NAME="constructor_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Constructor Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="TrackQueryResults()"><!-- --></A><H3>
TrackQueryResults</H3>
<PRE>
public <B>TrackQueryResults</B>()
                  throws <A HREF="../../openadk/library/ADKException.html" title="class in openadk.library">ADKException</A></PRE>
<DL>
<DD>Constructs a TrackQueryResults object to be used when the agent is not
  processing a SIF_Event message. If the agent is processing a SIF_Event
  in the Subscriber.onEvent method, the other form of constructor must be
  used to invoke Selective Message Blocking.
<P>
<DL>

<DT><B>Throws:</B>
<DD><CODE><A HREF="../../openadk/library/ADKException.html" title="class in openadk.library">ADKException</A></CODE></DL>
</DL>
<HR>

<A NAME="TrackQueryResults(openadk.library.Event, openadk.library.MessageInfo)"><!-- --></A><H3>
TrackQueryResults</H3>
<PRE>
public <B>TrackQueryResults</B>(<A HREF="../../openadk/library/Event.html" title="class in openadk.library">Event</A>&nbsp;event,
                         <A HREF="../../openadk/library/MessageInfo.html" title="interface in openadk.library">MessageInfo</A>&nbsp;msgInfo)
                  throws <A HREF="../../openadk/library/ADKException.html" title="class in openadk.library">ADKException</A></PRE>
<DL>
<DD>Constructs a TrackQueryResults object to be used when the agent needs
  to query for additional data while processing a SIF_Event message.
  The Event object passed to Subscriber.onEvent must be passed to this
  form of constructor. Selective Message Blocking is invoked when the
  Agent Local Queue is not being used.
<P>
<DL>
<DT><B>Parameters:</B><DD><CODE>event</CODE> - The Event object passed to Subscriber.onEvent<DD><CODE>msgInfo</CODE> - The MessageInfo object passed to Subscriber.onEvent
<DT><B>Throws:</B>
<DD><CODE><A HREF="../../openadk/library/ADKException.html" title="class in openadk.library">ADKException</A></CODE></DL>
</DL>

<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Method Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="setQueryOptions(int)"><!-- --></A><H3>
setQueryOptions</H3>
<PRE>
public void <B>setQueryOptions</B>(int&nbsp;queryOptions)</PRE>
<DL>
<DD>Sets optional query options
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="addQuery(openadk.library.Zone, openadk.library.Query)"><!-- --></A><H3>
addQuery</H3>
<PRE>
public void <B>addQuery</B>(<A HREF="../../openadk/library/Zone.html" title="interface in openadk.library">Zone</A>&nbsp;zone,
                     <A HREF="../../openadk/library/Query.html" title="class in openadk.library">Query</A>&nbsp;query)</PRE>
<DL>
<DD>Add a query to be executed when the waitForResults method is called
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="addQuery(openadk.library.Zone, openadk.library.Query, java.lang.String)"><!-- --></A><H3>
addQuery</H3>
<PRE>
public void <B>addQuery</B>(<A HREF="../../openadk/library/Zone.html" title="interface in openadk.library">Zone</A>&nbsp;zone,
                     <A HREF="../../openadk/library/Query.html" title="class in openadk.library">Query</A>&nbsp;query,
                     java.lang.String&nbsp;destinationId)</PRE>
<DL>
<DD>Add a query to be executed when the waitForResults method is called
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="addQuery(openadk.library.Topic, openadk.library.Query)"><!-- --></A><H3>
addQuery</H3>
<PRE>
public void <B>addQuery</B>(<A HREF="../../openadk/library/Topic.html" title="interface in openadk.library">Topic</A>&nbsp;topic,
                     <A HREF="../../openadk/library/Query.html" title="class in openadk.library">Query</A>&nbsp;query)</PRE>
<DL>
<DD>Add a query to be executed when the waitForResults method is called.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="addQuery(openadk.library.Topic, openadk.library.Query, java.lang.String)"><!-- --></A><H3>
addQuery</H3>
<PRE>
public void <B>addQuery</B>(<A HREF="../../openadk/library/Topic.html" title="interface in openadk.library">Topic</A>&nbsp;topic,
                     <A HREF="../../openadk/library/Query.html" title="class in openadk.library">Query</A>&nbsp;query,
                     java.lang.String&nbsp;destinationId)</PRE>
<DL>
<DD>Add a query to be executed when the waitForResults method is called.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="waitForResults(int)"><!-- --></A><H3>
waitForResults</H3>
<PRE>
public boolean <B>waitForResults</B>(int&nbsp;timeout)</PRE>
<DL>
<DD>Sends a SIF_Request message for each Query passed to the <code>addQuery</code>
  method and resets the timeout period to the given value. Blocks until at least
  one pending query returns data or the timeout period expires.<p>

  This method should be called repeatedly in a <b>while</b> loop as
  SIF_Response packets may be received by the agent in multiple packets.
  If not enclosed in a <b>while</b> loop, your agent will only process
  the first packet when a multi-packet SIF_Response is received. (If the
  caller only expects one packet - for example, when querying for a single
  SIF Data Object during SIF_Event processing - an outer <b>while</b>
  loop is not necessary.) Each time this method is called, the timeout
  period is reset and any new queries that have been added are executed.
  If called and all queries tracked by this object have returned data, no
  action is taken.<p>

  If a SIF_Request messages fails with an error acknowledgement from the
  ZIS or otherwise results in an exception, the error condition can be
  learned by calling the <code>getErrors</code> method. It is recommended
  that you always check for an error condition by calling the <code>hasErrors</code>
  or <code>getErrors</code> methods.
<P>
<DD><DL>

<DT><B>Returns:</B><DD>true if result data is available, otherwise false<DT><B>See Also:</B><DD><A HREF="../../openadk/library/TrackQueryResults.html#getErrors()"><CODE>getErrors()</CODE></A>, 
<A HREF="../../openadk/library/TrackQueryResults.html#hasErrors()"><CODE>hasErrors()</CODE></A></DL>
</DD>
</DL>
<HR>

<A NAME="available()"><!-- --></A><H3>
available</H3>
<PRE>
public int <B>available</B>()</PRE>
<DL>
<DD>Returns the number of results currently available
<P>
<DD><DL>

<DT><B>Returns:</B><DD>The number of</DL>
</DD>
</DL>
<HR>

<A NAME="hasNext()"><!-- --></A><H3>
hasNext</H3>
<PRE>
public boolean <B>hasNext</B>()</PRE>
<DL>
<DD>Determines if any results will be returned by the <code>next</code> method
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="isComplete()"><!-- --></A><H3>
isComplete</H3>
<PRE>
public boolean <B>isComplete</B>()</PRE>
<DL>
<DD>Have all requests been received?
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="next()"><!-- --></A><H3>
next</H3>
<PRE>
public <A HREF="../../openadk/library/TrackQueryResultsData.html" title="class in openadk.library">TrackQueryResultsData</A> <B>next</B>()</PRE>
<DL>
<DD>Returns the next group of result data, or null if no data is available.
  This method must be called repeatedly to retrieve all results because
  TrackQueryResults may have received multiple SIF_Response messages in
  response to its queries.<p>
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="getErrors()"><!-- --></A><H3>
getErrors</H3>
<PRE>
public <A HREF="../../openadk/library/ADKException.html" title="class in openadk.library">ADKException</A>[] <B>getErrors</B>()</PRE>
<DL>
<DD>Gets any SIF_Request errors received when the queries were executed.<p>

  When the <code>waitForResults</code> method is called, it executes all
  queries previously added to the TrackQueryResults object. If an error
  acknowledgement is received for a SIF_Request message, it is returned
  in this array. Call the <code>ADKException.getZone</code> method to
  learn the zone associated with each exception.
<P>
<DD><DL>

<DT><B>Returns:</B><DD>An array of ADKExceptions representing all error acknowledgements
      received by TrackQueryResults when the queries were issued.<DT><B>See Also:</B><DD><A HREF="../../openadk/library/TrackQueryResults.html#hasErrors()"><CODE>hasErrors()</CODE></A>, 
<A HREF="../../openadk/library/TrackQueryResults.html#waitForResults(int)"><CODE>waitForResults(int)</CODE></A></DL>
</DD>
</DL>
<HR>

<A NAME="hasErrors()"><!-- --></A><H3>
hasErrors</H3>
<PRE>
public boolean <B>hasErrors</B>()</PRE>
<DL>
<DD>Determines if any SIF_Request errors occurred when the queries were executed.<p>
<P>
<DD><DL>
<DT><B>See Also:</B><DD><A HREF="../../openadk/library/TrackQueryResults.html#getErrors()"><CODE>getErrors()</CODE></A>, 
<A HREF="../../openadk/library/TrackQueryResults.html#waitForResults(int)"><CODE>waitForResults(int)</CODE></A></DL>
</DD>
</DL>
<!-- ========= END OF CLASS DATA ========= -->
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/TrackQueryResults.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../index-files/index-1.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../openadk/library/TopicFactory.html" title="interface in openadk.library"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../openadk/library/TrackQueryResultsData.html" title="class in openadk.library"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../index.html?openadk/library/TrackQueryResults.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="TrackQueryResults.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;<A HREF="#nested_classes_inherited_from_class_openadk.library.impl.TrackQueryResultsImpl">NESTED</A>&nbsp;|&nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>

</BODY>
</HTML>
